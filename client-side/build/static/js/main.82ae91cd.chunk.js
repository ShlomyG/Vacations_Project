(this["webpackJsonpclient-side"]=this["webpackJsonpclient-side"]||[]).push([[0],{157:function(e,t,a){e.exports=a(264)},162:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(162),a(22)),l=a(15),s=a(10),u=a.n(s),m=a(16),p=a(6),d=a(126),g=a(142),h=a(51),b=a(318),f=a(302),v=a(14),E=a(109),O=a(321),j=a(301),y=Object(E.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function k(e){var t=e.message,a=e.type,n=y();return r.a.createElement("div",{className:n.root},r.a.createElement(O.a,{severity:a},r.a.createElement(j.a,null,a.toUpperCase()),r.a.createElement("strong",null,t)))}function S(e){Object(d.a)(e);var t=Object(v.c)((function(e){return e.user})),a=(Object(v.b)(),Object(n.useState)("")),o=Object(p.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(""),E=Object(p.a)(s,2),O=E[0],j=E[1],y=Object(n.useState)(""),S=Object(p.a)(y,2),C=S[0],x=S[1],w=Object(n.useState)(""),N=Object(p.a)(w,2),T=N[0],L=N[1],_=Object(n.useState)(""),A=Object(p.a)(_,2),V=A[0],D=A[1],I=Object(n.useState)(""),P=Object(p.a)(I,2),F=P[0],U=P[1],z=Object(n.useState)(""),W=Object(p.a)(z,2),G=W[0],R=W[1],M=Object(n.useState)(""),B=Object(p.a)(M,2),J=B[0],Y=B[1],q=Object(l.e)(),X=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:1000/user/admin/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.token},body:JSON.stringify({description:C,destination:T,image_src:V,departure:F,arrival:G,price:J})});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,201===a.status?(j(n.msg),setTimeout((function(){q.push("/vacations")}),2500)):400===a.status&&i(n.msg),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"add_container"},t.login&&1===t.role?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"h2"},"New vacation"),r.a.createElement(h.a,{variant:"h5"},"Dear Admin,",r.a.createElement("br",null)," please insert all the details to add a vacation"),r.a.createElement(g.a,null,r.a.createElement("form",{className:"add_inputs",onSubmit:X},r.a.createElement(b.a,{onChange:function(e){x(e.target.value)},label:"vacation description"}),r.a.createElement(b.a,{onChange:function(e){L(e.target.value)},label:"vacation destination"}),r.a.createElement(b.a,{onChange:function(e){D(e.target.value)},label:"Image Url"}),r.a.createElement(b.a,{onChange:function(e){U(e.target.value)},type:"date",helperText:"Departure date"}),r.a.createElement(b.a,{onChange:function(e){R(e.target.value)},type:"date",helperText:"Arrival date"}),r.a.createElement(b.a,{onChange:function(e){Y(e.target.value)},type:"number",helperText:"Price"}),c&&r.a.createElement(k,{message:c,type:"error"}),O?r.a.createElement(k,{message:O,type:"success"}):r.a.createElement(f.a,{variant:"outlined",color:"primary",onClick:X},"Add"),r.a.createElement(f.a,{variant:"outlined",color:"secondary",onClick:function(){q.push("/vacations")}},"Back")))):q.push("/"))}var C=a(131);function x(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],o=t[1],c=Object(v.c)((function(e){return e.user})),i=Object(v.b)();Object(n.useEffect)((function(){l()}),[]);var l=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/",{headers:{"Content-Type":"application/json",Authorization:localStorage.token}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,200===t.status?o(a.filter((function(e){return e.likes>0}))):a.error&&"Token"===a.errorType&&i({type:"LOGOUT"});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s={labels:a.map((function(e){return e.description})),datasets:[{label:"Likes Vacation",backgroundColor:"rgba(0,0,132,0.6)",borderColor:"rgba(0,0,0,0.8)",borderWidth:1,hoverBackgroundColor:"rgba(255,255,0,0.8)",hoverBorderColor:"rgba(0,0,132,1)",data:a.map((function(e){return e.likes}))}],options:{scales:{yAxes:[{ticks:{beginAtZero:!0,min:0}}]},maintainAspectRatio:!1}};return r.a.createElement("div",{className:"chart_container"},c&&1===c.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Followers Vacations Chart "),a&&a.length>0?r.a.createElement("div",{className:"chart"},r.a.createElement(C.Bar,{data:s,options:s.options})):r.a.createElement("h1",null,"There is no followers yet check later for updates..")))}var w=a(44),N=a(18),T=a(305),L=a(306),_=a(300),A=a(322),V=a(303),D=a(304),I=a(133),P=a.n(I),F=a(134),U=a.n(F),z=a(132),W=a.n(z),G=Object(E.a)((function(e){return{orange:{color:e.palette.getContrastText(V.a[500]),backgroundColor:V.a[500],marginRight:e.spacing(2)},purple:{color:e.palette.getContrastText(D.a[500]),backgroundColor:D.a[500]},grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(w.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(w.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(N.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(N.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(w.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(w.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(w.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function R(){var e=Object(v.c)((function(e){return e.user})),t=Object(v.b)(),a=Object(l.e)(),n=G(),o=r.a.useState(null),c=Object(p.a)(o,2),i=(c[0],c[1],r.a.useState(null)),s=Object(p.a)(i,2);s[0],s[1];return r.a.createElement("div",{className:n.grow},r.a.createElement(T.a,{position:"static"},r.a.createElement(L.a,null,r.a.createElement(A.a,{className:n.orange},e.fname&&e.fname.slice(0,1)),r.a.createElement(h.a,{className:n.title,variant:"h5",noWrap:!0},"Travel Project By Shlomy Gerstner"),r.a.createElement("div",{className:n.grow}),r.a.createElement("div",{className:n.sectionDesktop},1===e.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{"aria-label":"show 4 new mails",color:"inherit"},r.a.createElement(W.a,{titleAccess:"Add Vacation",onClick:function(){a.push("/add")}})),r.a.createElement(_.a,{color:"inherit"},r.a.createElement(P.a,{titleAccess:"Followers Chart",onClick:function(){a.push("/chart")}}))),r.a.createElement(_.a,{"aria-label":"show 4 new mails",color:"inherit"},r.a.createElement(U.a,{titleAccess:"LogOut",onClick:function(){localStorage.removeItem("token"),t({type:"LOGOUT"}),a.push("/login")}}))))))}var M=function(){var e=Object(l.e)(),t=Object(v.b)();return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function a(){var n,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("http://localhost:1000/actions/islogged",{method:"GET",headers:{Authorization:localStorage.token}});case 2:return n=a.sent,a.next=5,n.json();case 5:(r=a.sent).error?(t({type:"LOGOUT"}),e.push("/login")):(t({type:"LOGIN",payload:{id:r.id,role:r.role,fname:r.fname}}),e.push("/vacations"));case 7:case"end":return a.stop()}}),a)})))()}),[]),null},B=a(135),J=a(309),Y=a(307),q=a(319),X=a(308),Z=a(85),H=a.n(Z);function K(){return r.a.createElement(h.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Y.a,{color:"inherit"},"Shlomy Gerstner")," ",(new Date).getFullYear(),".")}var Q=Object(E.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/user/shlomyg7/likes)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function $(e){var t=e.history,a=Q(),o=Object(n.useState)(""),c=Object(p.a)(o,2),l=c[0],s=c[1],d=Object(n.useState)(""),E=Object(p.a)(d,2),O=E[0],j=E[1],y=Object(n.useState)(""),S=Object(p.a)(y,2),C=S[0],x=S[1],w=Object(v.b)(),N=function(){var e=Object(m.a)(u.a.mark((function e(a){var n,r,o,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:1000/actions/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:l,password:O})});case 4:return n=e.sent,e.next=7,n.json();case 7:(r=e.sent).error?x(r.msg):(localStorage.token=r.access_token,o=Object(B.a)(r.access_token),c=o.id,i=o.role,s=o.fname,w({type:"LOGIN",payload:{id:c,role:i,fname:s}}),t.push("/vacations")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),x(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(X.a,{container:!0,component:"main",className:a.root},r.a.createElement(J.a,null),r.a.createElement(X.a,{item:!0,xs:!1,sm:4,md:7,className:a.image}),r.a.createElement(X.a,{item:!0,xs:12,sm:8,md:5,component:g.a,elevation:6,square:!0},r.a.createElement("div",{className:a.paper},r.a.createElement(A.a,{className:a.avatar},r.a.createElement(H.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},"Welcome to Travel Project"),r.a.createElement(h.a,{component:"h2",variant:"h5"},"Log in"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:N},r.a.createElement(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"User Name",name:"username",autoComplete:"UserName",autoFocus:!0,onChange:function(e){return s(e.target.value)}}),r.a.createElement(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return j(e.target.value)}}),C&&r.a.createElement(k,{message:C,type:"error"}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Log In"),r.a.createElement(X.a,{container:!0},r.a.createElement(X.a,{item:!0,xs:!0}),r.a.createElement(X.a,{item:!0},r.a.createElement(Y.a,{component:i.b,to:"/signin",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(q.a,{mt:5},r.a.createElement(K,null))))))}var ee=Object(E.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/user/shlomyg7/likes)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function te(e){var t=e.history,a=ee(),o=Object(n.useState)(""),c=Object(p.a)(o,2),l=c[0],s=c[1],d=Object(n.useState)(""),v=Object(p.a)(d,2),E=v[0],O=v[1],j=Object(n.useState)(""),y=Object(p.a)(j,2),S=y[0],C=y[1],x=Object(n.useState)(""),w=Object(p.a)(x,2),N=w[0],T=w[1],L=Object(n.useState)(""),_=Object(p.a)(L,2),V=_[0],D=_[1],I=Object(n.useState)(""),P=Object(p.a)(I,2),F=P[0],U=P[1],z=function(){var e=Object(m.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:1000/actions/register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({fname:l,lname:E,username:S,password:N})});case 4:return n=e.sent,e.next=7,n.json();case 7:(r=e.sent).error?D(r.msg):(D(!1),U(r.msg),setTimeout((function(){t.push("/login")}),2500)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),D(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(X.a,{container:!0,component:"main",className:a.root},r.a.createElement(J.a,null),r.a.createElement(X.a,{item:!0,xs:!1,sm:4,md:7,className:a.image}),r.a.createElement(X.a,{item:!0,xs:12,sm:8,md:5,component:g.a,elevation:6,square:!0},r.a.createElement("div",{className:a.paper},r.a.createElement(A.a,{className:a.avatar},r.a.createElement(H.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},"Welcome to Travel Project"),r.a.createElement(h.a,{component:"h2",variant:"h5"},"Please insert your details to create new member"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:z},r.a.createElement(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"fname",label:"First Name",name:"fname",autoComplete:"FirstName",autoFocus:!0,onChange:function(e){return s(e.target.value)}}),r.a.createElement(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lname",label:"Last Name",name:"lname",autoComplete:"LastName",autoFocus:!0,onChange:function(e){return O(e.target.value)}}),r.a.createElement(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"User Name",name:"username",autoComplete:"UserName",autoFocus:!0,onChange:function(e){return C(e.target.value)}}),r.a.createElement(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return T(e.target.value)}}),V&&r.a.createElement(k,{message:V,type:"error"}),F&&r.a.createElement(k,{message:F,type:"success"}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up"),r.a.createElement(X.a,{container:!0},r.a.createElement(X.a,{item:!0,xs:!0}),r.a.createElement(X.a,{item:!0},r.a.createElement(Y.a,{component:i.b,to:"/login",variant:"body2"},"Do you have an account? Log In")))))))}var ae=a(3),ne=a(310),re=a(311),oe=a(312),ce=a(313),ie=a(314),le=a(315),se=a(86),ue=a(101),me=a.n(ue),pe=a(138),de=a.n(pe),ge=a(84),he=a.n(ge),be=a(316),fe=a(320),ve=a(136),Ee=a.n(ve),Oe=Object(E.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},typography:{padding:e.spacing(2)}}}));function je(e){var t=e.vacation,a=e.setlikes,n=e.trigger,o=Oe(),c=r.a.useState(null),i=Object(p.a)(c,2),s=i[0],d=i[1],g=(Object(l.e)(),function(){d(null)}),b=function(){var e=Object(m.a)(u.a.mark((function e(){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/user/admin/"+t.id,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.token}});case 3:return r=e.sent,e.next=6,r.json();case 6:o=e.sent,200===r.status?a(!n):alert(o.msg),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),v=Boolean(s),E=v?"simple-popover":void 0;return r.a.createElement("div",null,r.a.createElement(_.a,{"aria-describedby":E,variant:"contained",color:"primary",onClick:function(e){d(e.currentTarget)}},r.a.createElement(Ee.a,{color:"secondary"})),r.a.createElement(fe.a,{id:E,open:v,anchorEl:s,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(h.a,{className:o.typography},'Are you sure you want to remove "',t.description.slice(0,21),'"? '),r.a.createElement("div",{className:o.root},r.a.createElement(f.a,{variant:"outlined",color:"secondary",onClick:b},"Delete"),r.a.createElement(f.a,{variant:"outlined",onClick:g},"Cancel")," ")))}var ye=a(137),ke=a.n(ye),Se=Object(E.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},typography:{padding:e.spacing(2)}}}));function Ce(e){var t=e.vacation,a=e.setlikes,o=e.trigger,c=(Se(),r.a.useState(null)),i=Object(p.a)(c,2),s=i[0],d=i[1],E=Object(l.e)(),O=Object(v.c)((function(e){return e.user})),j=(Object(v.b)(),Object(n.useState)("")),y=Object(p.a)(j,2),S=y[0],C=y[1],x=Object(n.useState)(""),w=Object(p.a)(x,2),N=w[0],T=w[1],L=Object(n.useState)(t.description),A=Object(p.a)(L,2),V=A[0],D=A[1],I=Object(n.useState)(t.destination),P=Object(p.a)(I,2),F=P[0],U=P[1],z=Object(n.useState)(t.image_src),W=Object(p.a)(z,2),G=W[0],R=W[1],M=Object(n.useState)(t.departure),B=Object(p.a)(M,2),J=B[0],Y=B[1],q=Object(n.useState)(t.arrival),X=Object(p.a)(q,2),Z=X[0],H=X[1],K=Object(n.useState)(t.price),Q=Object(p.a)(K,2),$=Q[0],ee=Q[1],te=function(){C(!1),T(!1),d(null)},ae=function(){var e=Object(m.a)(u.a.mark((function e(n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:1000/user/admin/edit/"+t.id,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.token},body:JSON.stringify({description:V,destination:F,image_src:G,departure:J,arrival:Z,price:$})});case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,201===r.status?(T(c.msg),a(!o),a(!o),setTimeout((function(){te()}),2e3)):400===r.status&&C(c.msg),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),ne=Boolean(s),re=ne?"simple-popover":void 0;return r.a.createElement("div",null,r.a.createElement(_.a,{"aria-describedby":re,variant:"contained",color:"primary",onClick:function(e){d(e.currentTarget)}},r.a.createElement(ke.a,{color:"primary"})),r.a.createElement(fe.a,{id:re,open:ne,anchorEl:s,onClose:te,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",{className:"add_container"},O.login&&1===O.role?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"h4"},"Edit vacation No.",t.id),r.a.createElement(g.a,null,r.a.createElement("form",{className:"add_inputs",onSubmit:ae},r.a.createElement(b.a,{onChange:function(e){D(e.target.value)},label:"vacation description",defaultValue:t.description}),r.a.createElement(b.a,{onChange:function(e){U(e.target.value)},label:"vacation destination",defaultValue:t.destination}),r.a.createElement(b.a,{onChange:function(e){R(e.target.value)},label:"Image Url",defaultValue:G}),r.a.createElement(b.a,{onChange:function(e){Y(e.target.value)},type:"date",helperText:"Departure date",defaultValue:t.departure.slice(0,10)}),r.a.createElement(b.a,{onChange:function(e){H(e.target.value)},type:"date",helperText:"Arrival date",defaultValue:t.arrival.slice(0,10)}),r.a.createElement(b.a,{onChange:function(e){ee(e.target.value)},type:"number",helperText:"Price",defaultValue:t.price}),S&&r.a.createElement(k,{message:S,type:"error"}),N&&r.a.createElement(k,{message:N,type:"success"}),r.a.createElement(f.a,{variant:"outlined",color:"primary",onClick:ae},"Edit"),r.a.createElement(f.a,{variant:"outlined",color:"secondary",onClick:te},"Cancel")))):E.push("/"))))}var xe=Object(E.a)((function(e){return{root:{maxWidth:350},media:{width:330,height:0,paddingTop:"60.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:se.a[500]}}}));function we(e){var t=e.vacation,a=e.trigger,n=e.likes,o=e.setLikes,c=xe(),i=r.a.useState(!1),l=Object(p.a)(i,2),s=l[0],u=l[1],m=Object(v.c)((function(e){return e.user}));return r.a.createElement(ne.a,{className:c.root},r.a.createElement(re.a,{title:t.description.slice(0,21),subheader:t.destination.slice(0,25)}),r.a.createElement(oe.a,{className:c.media,image:t.image_src,title:t.description}),r.a.createElement(ce.a,null,r.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"p"},"Only ",r.a.createElement("strong",null,t.price),"\u20ac")),r.a.createElement(ie.a,{disableSpacing:!0},m.role?r.a.createElement(r.a.Fragment,null,r.a.createElement(je,{vacation:t,setlikes:o,trigger:a}),r.a.createElement(Ce,{vacation:t,setlikes:o,trigger:a})):r.a.createElement(_.a,{"aria-label":"add to favorites",onClick:function(){n?(fetch("http://localhost:1000/user/dis_like/"+m.id,{method:"POST",headers:{"content-type":"application/json",Authorization:localStorage.token},body:JSON.stringify({vacation_id:t.id})}),o(!a)):(fetch("http://localhost:1000/user/add_like/"+m.id,{method:"POST",headers:{"content-type":"application/json",Authorization:localStorage.token},body:JSON.stringify({vacation_id:t.id})}),o(!a))}},r.a.createElement(me.a,{color:n?"secondary":"inherit"})),r.a.createElement(_.a,{className:Object(ae.default)(c.expand,Object(w.a)({},c.expandOpen,s)),onClick:function(){u(!s)},"aria-expanded":s,"aria-label":"show more"},r.a.createElement(de.a,null))),r.a.createElement(le.a,{in:s,timeout:"auto",unmountOnExit:!0},r.a.createElement(ce.a,null,r.a.createElement(h.a,{paragraph:!0},t.description),r.a.createElement(h.a,{paragraph:!0},"departure: ",r.a.createElement("br",null),he()(t.departure).format("MMMM Do YYYY")),r.a.createElement(h.a,{paragraph:!0},"arrival: ",r.a.createElement("br",null),he()(t.arrival).format("MMMM Do YYYY")),r.a.createElement(be.a,{badgeContent:t.likes,color:"secondary"},r.a.createElement(me.a,{color:"inherit"})))))}var Ne=a(140),Te=a.n(Ne),Le=a(317),_e=a(139);function Ae(e){e.setLikeVacations,e.setUnLikeVacations;var t=e.setSearchedVacations,a=(e.likeVacations,e.unLikeVacations,Object(n.useState)("")),o=Object(p.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(""),s=Object(p.a)(l,2),d=s[0],g=s[1],h=Object(n.useState)(""),v=Object(p.a)(h,2),E=v[0],O=v[1],j=Object(n.useState)(""),y=Object(p.a)(j,2),S=y[0],C=y[1],x=Object(_e.useStyles)(),w=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/user/vacation_search",{method:"POST",headers:{Authorization:localStorage.token,"content-type":"application/json"},body:JSON.stringify({descriptionSearch:c,departureSearch:d,arrivalSearch:E})});case 3:return a=e.sent,e.next=6,a.json();case 6:(n=e.sent).length>0?t(n):(C("No results found, Try Again"),setTimeout((function(){C("")}),3500)),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search_container"},r.a.createElement("div",{className:"search_form"},r.a.createElement(b.a,{className:x.search,id:"outlined-basic",label:"Search",value:c,onChange:function(e){i(e.target.value)},InputProps:{startAdornment:r.a.createElement(Le.a,{position:"start"},r.a.createElement(Te.a,null))}}),r.a.createElement(b.a,{onChange:function(e){g(e.target.value)},label:"From date",type:"date",value:d,InputLabelProps:{shrink:!0}}),r.a.createElement(b.a,{onChange:function(e){O(e.target.value)},label:"To date",type:"date",value:E,InputLabelProps:{shrink:!0}}),r.a.createElement(f.a,{className:x.buttons,variant:"contained",color:"primary",size:"small",onClick:w},"search"),r.a.createElement(f.a,{className:x.buttons,variant:"outlined",color:"primary",size:"small",onClick:function(){t([]),i("")}},"Clear")),S&&r.a.createElement(k,{type:"info",message:S})))}var Ve=Object(E.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden","& > *":{marginLeft:e.spacing(7),marginTop:e.spacing(5)}},orange:{color:e.palette.getContrastText(V.a[500]),backgroundColor:V.a[500]},purple:{color:e.palette.getContrastText(D.a[500]),backgroundColor:D.a[500]}}}));function De(e){e.history;var t=Ve(),a=(Object(v.b)(),Object(v.c)((function(e){return e.user}))),o=Object(n.useState)([]),c=Object(p.a)(o,2),l=c[0],s=c[1],d=Object(n.useState)([]),g=Object(p.a)(d,2),h=g[0],b=g[1],f=Object(n.useState)([]),E=Object(p.a)(f,2),O=E[0],j=E[1],y=Object(n.useState)(!0),k=Object(p.a)(y,2),S=k[0],C=k[1];return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/user/",{method:"GET",headers:{Authorization:localStorage.token}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,s(a.likes),b(a.unlikes);case 8:case"end":return e.stop()}}),e)})))()}),[S]),r.a.createElement("div",null,a.login?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"hello ",a.fname),r.a.createElement(Ae,{setLikeVacations:s,setUnLikeVacations:b,setSearchedVacations:j,LikeVacations:l,unLikeVacations:h}),r.a.createElement("div",{className:t.root},O.length>0?O.map((function(e){return r.a.createElement(we,{key:e.id,vacation:e,trigger:S,likes:l.filter((function(t){return t.id===e.id})).length>0,setLikes:C})})):r.a.createElement(r.a.Fragment,null,l.map((function(e){return r.a.createElement(we,{key:e.id,vacation:e,trigger:S,likes:!0,setLikes:C})})),h.map((function(e){return r.a.createElement(we,{key:e.id,vacation:e,trigger:S,likes:!1,setLikes:C})}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/login"},"login")))}var Ie=function(){return r.a.createElement(i.a,null,r.a.createElement(M,null),r.a.createElement(R,null),r.a.createElement(l.a,{path:"/signin",component:te}),r.a.createElement(l.a,{path:"/login",component:$}),r.a.createElement(l.a,{path:"/vacations",component:De}),r.a.createElement(l.a,{path:"/add",component:S}),r.a.createElement(l.a,{path:"/chart",component:x}))},Pe=a(59),Fe={login:!1},Ue=Object(Pe.c)(Object(Pe.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var a={login:!0,id:t.payload.id,role:t.payload.role,fname:t.payload.fname};return a;case"LOGOUT":return Fe;default:return e}}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v.a,{store:Ue},r.a.createElement(Ie,null))),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.82ae91cd.chunk.js.map